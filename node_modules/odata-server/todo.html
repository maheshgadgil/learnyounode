<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://include.jaydata.org/datajs-1.0.3.min.js"></script>
    <script src="http://include.jaydata.org/jaydata.js"></script>
    <script>
        $data.initService('http://localhost:52999/todo').then(function (todoDB) {
            
            //Add new records to the database
            var newTodo = todoDB.Todos.add({ Task: 'Drink a beer', Completed: true });
            todoDB.Todos.add({ Task: 'Buy milk', Completed: false });
            todoDB.saveChanges().then(function () {
                //Id of the saved entity is returned by JayData without manual query
                alert(newTodo.Id);
            })
            .then(function () {
                //query the completed tasks beginning with 'Dri' prefix
                todoDB.Todos.filter(function (t) { return t.Completed && t.Task.startsWith('Dri');})
                    .toArray(function (todos) {
                        console.dir(todos);
                })
            });;
        });
    </script>
</head> 
<body></body>
</html>